%html
  %head
    %title Dossier
    = stylesheet_link_tag "application", :media => "all"
    = javascript_include_tag "application"
    %meta{content:"width=device-width", name:"viewport"}
    %meta{name:"apple-mobile-web-app-capable", content:"yes"}
    = csrf_meta_tags

  %body
    = yield

    %script{src:"http://platform.linkedin.com/in.js"}
      api_key: 77m7x30ie4sdmo
      authorize: true
      credentials_cookie: true
      scope: r_fullprofile r_emailaddress r_contactinfo r_network
      onLoad: onLinkedInLoad


    :javascript
      // 2. Runs when the JavaScript framework is loaded
        function onLinkedInLoad() {
          IN.Event.on(IN, "auth", onLinkedInAuth);
      }

      // 2. Runs when the viewer has authenticated
      function onLinkedInAuth() {
        IN.API.Profile("me").result(displayProfiles);
      }

      // 2. Runs when the Profile() API call returns successfully
      function displayProfiles(profiles) {
        member = profiles.values[0];
        document.getElementById("profiles").innerHTML =
        "<p id=\"" + member.id + "\">Hello " +  member.firstName + " " + member.lastName + "</p>";
      }
